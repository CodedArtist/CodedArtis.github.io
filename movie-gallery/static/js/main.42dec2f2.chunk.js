(this["webpackJsonpts-react-app"]=this["webpackJsonpts-react-app"]||[]).push([[0],{24:function(e,t,c){},25:function(e,t,c){},27:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),s=c(18),a=c.n(s),i=(c(24),c(25),c(14)),o=c(2),j=c(4),u=c(9),l=c.n(u),b=c(11),h="https://omdbapi.com/?apiKey=4a3b711b&";function p(e){return d.apply(this,arguments)}function d(){return(d=Object(b.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+new URLSearchParams(t).toString());case 2:return c=e.sent,e.next=5,c.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return f.apply(this,arguments)}function f(){return(f=Object(b.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(b.a)(l.a.mark((function e(t){var c,n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.length>1&&void 0!==r[1]?r[1]:"full",n={i:t,plot:c},e.next=4,p(n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c(27);var m=c(0);function v(e){var t=Object(o.g)();function c(){t.push("/detail/".concat(e.movie.imdbID))}return Object(m.jsxs)("div",{className:"movie-card",children:[Object(m.jsx)("img",{src:"N/A"===e.movie.Poster?"http://bpic.588ku.com/element_pic/01/47/03/35574339ab3c813.jpg":e.movie.Poster,alt:e.movie.Title,onClick:c,loading:"lazy"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"movie-card__title",onClick:c,children:e.movie.Title}),Object(m.jsxs)("span",{className:"movie-card__year",children:["\u4e0a\u6620\u5e74\u4efd\uff1a",e.movie.Year]}),Object(m.jsxs)("span",{className:"movie-card__type",children:["\u4f5c\u54c1\u7c7b\u578b\uff1a",e.movie.Type]})]})]})}c(34);function g(e){var t=e.movies;return Object(m.jsx)("div",{className:"movie-card-group",children:t.map((function(e){return Object(m.jsx)(v,{movie:e},e.imdbID)}))})}function y(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),c=t[0],r=t[1];return Object(n.useEffect)((function(){O({s:"man",page:1}).then((function(e){e.Search&&r(e.Search)}))}),[]),Object(m.jsx)(g,{movies:c})}c(35);function N(){var e=Object(o.g)();return Object(m.jsxs)("header",{children:[Object(m.jsx)("span",{onClick:function(){return e.push("/home")},children:"\ud83c\udfac \u7535\u5f71\u753b\u5eca"}),!e.location.pathname.startsWith("/search")&&Object(m.jsx)("span",{onClick:function(){return e.push("/search")},children:"\ud83d\udd0d \u641c\u7d22 "})]})}c(36);function S(){var e=Object(o.g)(),t=Object(n.useState)(""),c=Object(j.a)(t,2),r=c[0],s=c[1],a=Object(n.useState)(""),i=Object(j.a)(a,2),u=i[0],l=i[1];return Object(n.useEffect)((function(){/[^a-z\s\d]/i.test(r)?l("\ud83d\udce3 \u4ec5\u82f1\u6587\u641c\u7d22\u6709\u6548"):l("")}),[r]),Object(m.jsx)("div",{className:"search",children:Object(m.jsxs)("div",{className:"search-box",children:[Object(m.jsxs)("form",{onSubmit:function(t){t.preventDefault(),r&&e.push("/list/".concat(r))},"data-error":u,children:[Object(m.jsx)("input",{type:"text",value:r,placeholder:"\u8bf7\u8f93\u5165\u7535\u5f71\u540d\u79f0",onInput:function(e){s(e.target.value)}}),Object(m.jsx)("button",{type:"submit",children:"\ud83d\udd0d"})]}),Object(m.jsx)("div",{className:"search-histories"})]})})}c(37),c(38);function k(e){var t=e.current,c=e.total,r=e.setCurrent,s=c>1e3?1e3:c,a=Math.ceil(s/10),i=Object(n.useState)([]),o=Object(j.a)(i,2),u=o[0],l=o[1];return Object(n.useEffect)((function(){var e=[];if(a<=2)e=[];else if(a<=7)e=Array.from(Array(a-2)).map((function(e,t){return t+2}));else{(e=Array.from(Array(t-1)).map((function(e,t){return t+2}))).length&&e[e.length-1]===a&&e.pop();for(var c=1;c<=5&&t+c<a;c++)e.push(t+c);if(e.length>5)if([1,2,3,4].includes(t))e=e.slice(0,5);else if([a,a-1,a-2,a-3].includes(t))e=e.slice(-5);else{var n=e.findIndex((function(e){return e===t}));e=e.slice(n-2,n+3)}}l(e)}),[t,s,a]),Object(m.jsxs)("p",{className:"pagination",children:[Object(m.jsxs)("span",{className:"total",children:["\u5171 ",s," \u6761\u6570\u636e"]}),Object(m.jsx)("button",{onClick:function(){return r(1)},disabled:1===t,children:"1"}),u[0]&&2!==u[0]&&"...",u.map((function(e){return Object(m.jsx)("button",{disabled:e===t,onClick:function(){return r(e)},children:e},e)})),u.length&&u[u.length-1]!==a-1&&"...",1!==a&&Object(m.jsx)("button",{onClick:function(){return r(a)},disabled:a===t,children:a})]})}function w(){var e=Object(o.g)(),t=Object(o.h)().searchValue,c=Object(n.useState)([]),r=Object(j.a)(c,2),s=r[0],a=r[1],i=Object(n.useState)(""),u=Object(j.a)(i,2),l=u[0],b=u[1],h=new URLSearchParams(e.location.search).get("page"),p=Object(n.useState)(Number(h)||1),d=Object(j.a)(p,2),f=d[0],x=d[1],v=Object(n.useState)(0),y=Object(j.a)(v,2),N=y[0],S=y[1];return Object(n.useEffect)((function(){O({s:t,page:f}).then((function(e){e.Error&&b(e.Error),e.Search&&a(e.Search),e.totalResults&&S(Number(e.totalResults))}))}),[t,f]),Object(n.useEffect)((function(){e.location.search.includes("?page=".concat(f))||e.replace("".concat(e.location.pathname,"?page=").concat(f))}),[f,e]),Object(m.jsxs)("div",{className:"list",children:[Object(m.jsxs)("h2",{children:["\ud83d\udc31\u200d\ud83c\udfcd\u3010",t,"\u3011\u7684\u641c\u7d22\u7ed3\u679c"]}),l?Object(m.jsxs)("div",{className:"error-box",children:[Object(m.jsxs)("p",{children:["\u63a5\u53e3\u9519\u8bef\uff1a",l]}),Object(m.jsx)("p",{children:"\u6362\u4e2a\u5173\u952e\u8bcd\u8bd5\u8bd5\u5427"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(g,{movies:s}),Object(m.jsx)(k,{setCurrent:x,current:f,total:N})]})]})}c(39);function A(){var e,t,c,r=Object(o.h)().id,s=Object(o.g)(),a=Object(n.useState)({}),i=Object(j.a)(a,2),u=i[0],l=i[1],b=Object(n.useState)(!1),h=Object(j.a)(b,2),p=h[0],d=h[1];return Object(n.useEffect)((function(){return window.scrollTo({top:0}),function(e){return x.apply(this,arguments)}(r).then((function(e){e.Error?alert(e.Error):!p&&l(e)})),function(){d(!0)}}),[r,p]),Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsx)("span",{onClick:s.goBack,children:"\ud83d\udd19 \u8fd4\u56de"}),Object(m.jsx)("img",{src:"N/A"===u.Poster?"http://bpic.588ku.com/element_pic/01/47/03/35574339ab3c813.jpg":u.Poster,alt:""}),Object(m.jsx)("p",{className:"title",children:u.Title}),Object(m.jsxs)("p",{children:["\u7c7b\u578b\uff1a",u.Type]}),Object(m.jsxs)("p",{children:["\u4e0a\u6620\u65e5\u671f\uff1a",u.Released]}),Object(m.jsxs)("p",{children:["\u7968\u623f\uff1a",(null===(e=u.BoxOffice)||void 0===e?void 0:e.replace("$","\ud83d\udcb2"))||"N/A"]}),Object(m.jsxs)("p",{children:["\u65f6\u957f\uff1a",u.Runtime]}),Object(m.jsxs)("p",{children:["\u6f14\u5458\uff1a",u.Actors]}),Object(m.jsxs)("p",{children:["\u5bfc\u6f14\uff1a",u.Director]}),Object(m.jsxs)("p",{children:["\u7f16\u5267\uff1a",u.Writer]}),Object(m.jsxs)("p",{children:["\u5206\u7ea7\uff1a",u.Rated]}),Object(m.jsxs)("p",{children:["\u5206\u7c7b\uff1a",u.Genre]}),Object(m.jsxs)("p",{children:["\u5267\u60c5\uff1a",u.Plot]}),Object(m.jsxs)("p",{children:["\u8bed\u8a00\uff1a",u.Language]}),Object(m.jsxs)("p",{children:["\u56fd\u5bb6\uff1a",u.Country]}),Object(m.jsx)("p",{children:"\u83b7\u5956"}),Object(m.jsx)("ul",{children:null===(t=u.Awards)||void 0===t?void 0:t.split(".").filter((function(e){return e&&"N/A"!==e})).map((function(e){return Object(m.jsxs)("li",{children:["\ud83c\udfc6 ",e]},e)}))}),Object(m.jsx)("p",{children:"\u8bc4\u5206"}),Object(m.jsx)("ul",{children:null===(c=u.Ratings)||void 0===c?void 0:c.map((function(e){return Object(m.jsxs)("li",{children:[e.Source,": ",e.Value]},e.Source)}))})]})}function C(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(i.a,{basename:"/movie-gallery",children:[Object(m.jsx)(N,{}),Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.a,{path:"/",to:"/home",exact:!0}),Object(m.jsx)(o.b,{path:"/list/:searchValue",render:function(){return Object(m.jsx)(w,{})}}),Object(m.jsx)(o.b,{path:"/home",component:y}),Object(m.jsx)(o.b,{path:"/search",children:Object(m.jsx)(S,{})}),Object(m.jsx)(o.b,{path:"/detail/:id",component:A})]})]})})}a.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(C,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.42dec2f2.chunk.js.map