import{p as e,f as a,o as l,c as i,b as t,t as o,k as n,v as d,F as s,w as g,l as u,h as m}from"./index.6f9f6b42.js";import{_ as r,a as b,u as p}from"./Table.1d3edf62.js";import"./Tag.708a0204.js";const c={components:{Confirm:r,Table:b},setup(){const{tagList:e,getAllTags:a,createTag:l,deleteTag:i,updateTag:t}=p();return a(),{tagList:e,getAllTags:a,createTag:l,deleteTag:i,updateTag:t}},data(){return{tableConfig:{columnList:[{label:"标签名",prop:"name"},{label:"色相值",prop:"hue"},{label:"关联书签数量",prop:"bookmarkNum"}]},tableButtonList:[{text:"编辑",handler:this.openUpdateDialog},{text:"删除",handler:this.openDelDialog}],addDialog:{visible:!1,tag:{name:"",hue:1}},delDialog:{visible:!1,id:"",tagName:""},editDialog:{visible:!1,id:"",name:"",hue:1},list:[]}},methods:{openAddDialog(){this.addDialog={visible:!0,tag:{name:"",hue:parseInt(360*Math.random())}}},openDelDialog(e){this.delDialog={visible:!0,id:e.id,tagName:e.name}},openUpdateDialog(e){this.editDialog={visible:!0,id:e.id,name:e.name,hue:e.hue}},onConfirmCreateTag(){const e={name:this.addDialog.tag.name,hue:this.addDialog.tag.hue||200};e.name?this.createTag(e).catch(alert):alert("请输入有效标签名称")},onConfirmUpdateTag(){const e={id:this.editDialog.id,name:this.editDialog.name,hue:Number(this.editDialog.hue)};e.name?this.updateTag(e).catch(alert):alert("请输入有效标签名称")}},created(){this.$utils.setSiteTitle("管理标签")}},h=g();e("data-v-2f247933");const D={class:"block flex-between",style:{"margin-top":"6rem"}},f=u("共 "),v={class:"is-size-3"},T=u(" 个标签"),C={class:"field"},U=t("label",{class:"label"},"标签名称",-1),x={class:"field"},L=t("label",{class:"label"},"Hue",-1);a();const V=h(((e,a,g,u,r,b)=>{const p=m("Table"),c=m("FormItem"),V=m("Confirm");return l(),i(s,null,[t("div",D,[t("span",null,[f,t("span",v,o(u.tagList.length),1),T]),t("button",{class:"level-item button is-primary",onClick:a[1]||(a[1]=(...e)=>b.openAddDialog&&b.openAddDialog(...e))}," 创建新标签 ")]),t(p,{value:u.tagList,buttonList:r.tableButtonList,config:r.tableConfig},null,8,["value","buttonList","config"]),t(V,{visible:r.addDialog.visible,"onUpdate:visible":a[4]||(a[4]=e=>r.addDialog.visible=e),title:"新建标签",onConfirm:b.onConfirmCreateTag},{default:h((()=>[t("div",null,[t(c,{label:"名称",modelValue:r.addDialog.tag.name,"onUpdate:modelValue":a[2]||(a[2]=e=>r.addDialog.tag.name=e)},null,8,["modelValue"]),t(c,{label:"Hue",type:"number",modelValue:r.addDialog.tag.hue,"onUpdate:modelValue":a[3]||(a[3]=e=>r.addDialog.tag.hue=e)},null,8,["modelValue"])])])),_:1},8,["visible","onConfirm"]),t(V,{visible:r.delDialog.visible,"onUpdate:visible":a[5]||(a[5]=e=>r.delDialog.visible=e),confirmText:"删除",confirmType:"danger",title:`确定要删除标签“${r.delDialog.tagName}”吗？`,onConfirm:a[6]||(a[6]=e=>u.deleteTag(r.delDialog.id))},null,8,["visible","title"]),t(V,{visible:r.editDialog.visible,"onUpdate:visible":a[9]||(a[9]=e=>r.editDialog.visible=e),title:"编辑标签",cancelText:"关闭",onConfirm:b.onConfirmUpdateTag,confirmText:"更新"},{default:h((()=>[t("div",null,[t("div",C,[U,n(t("input",{class:"input",type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>r.editDialog.name=e),placeholder:"请输入新标签名称"},null,512),[[d,r.editDialog.name]])]),t("div",x,[L,n(t("input",{class:"input","onUpdate:modelValue":a[8]||(a[8]=e=>r.editDialog.hue=e),type:"number"},null,512),[[d,r.editDialog.hue]])])])])),_:1},8,["visible","onConfirm"])],64)}));c.render=V,c.__scopeId="data-v-2f247933";export default c;
