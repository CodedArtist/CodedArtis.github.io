var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,s=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,n=(e,n)=>{for(var r in n||(n={}))t.call(n,r)&&s(e,r,n[r]);if(a)for(var r of a(n))o.call(n,r)&&s(e,r,n[r]);return e};import{c as r,a as l,C as i,r as c,p as u,b as d,d as p,o as m,e as g,f,F as b,u as h,w as v,v as k,T as _,g as y,h as j,i as w,t as O,j as P,k as E,l as L}from"./vendor.2fc8de9b.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const o=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,n)=>{const r=new URL(e,o);if(self[t].moduleMap[r])return a(self[t].moduleMap[r]);const l=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){n(new Error(`Failed to import: ${e}`)),s(i)},onload(){a(self[t].moduleMap[r]),s(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/nav/assets/");let I;const R={},$=function(e,t){if(!t)return e();if(void 0===I){const e=document.createElement("link").relList;I=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in R)return;R[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":I,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e()))};var A=r({history:l("/nav"),routes:[{path:"/",redirect:"/index"},{path:"/index",component:()=>$((()=>__import__("./index.348a7b6f.js")),["/nav/assets/index.348a7b6f.js","/nav/assets/index.66e671c4.css","/nav/assets/BookmarkBlock.17039fc1.js","/nav/assets/BookmarkBlock.53948c06.css","/nav/assets/vendor.2fc8de9b.js"])},{path:"/loading",component:()=>$((()=>__import__("./loading.05c8ad68.js")),["/nav/assets/loading.05c8ad68.js","/nav/assets/vendor.2fc8de9b.js"])},{path:"/admin",component:()=>$((()=>__import__("./RouterView.8eccf432.js")),["/nav/assets/RouterView.8eccf432.js","/nav/assets/vendor.2fc8de9b.js"]),children:[{path:"tags",component:()=>$((()=>__import__("./tags.dd8883a1.js")),["/nav/assets/tags.dd8883a1.js","/nav/assets/tags.0dbca33a.css","/nav/assets/Confirm.62b3a7a7.js","/nav/assets/Confirm.fc9af0a7.css","/nav/assets/vendor.2fc8de9b.js"])},{path:"bookmarks",component:()=>$((()=>__import__("./bookmarks.42243198.js")),["/nav/assets/bookmarks.42243198.js","/nav/assets/bookmarks.46c45dae.css","/nav/assets/vendor.2fc8de9b.js","/nav/assets/BookmarkBlock.17039fc1.js","/nav/assets/BookmarkBlock.53948c06.css","/nav/assets/Confirm.62b3a7a7.js","/nav/assets/Confirm.fc9af0a7.css"])}]}]});const x=i.create({baseURL:"https://service-j3cuc7cz-1257263957.sh.apigw.tencentcs.com/release/bmm"});async function T(){const e=await x.get("https://api.github.com/repos/y80/y80.github.io/contents/db/nav.json");return JSON.parse(decodeURIComponent(escape(atob(e.content))))}x.interceptors.request.use((e=>(e.headers.Authorization=localStorage.getItem("Authorization"),e))),x.interceptors.response.use((e=>e.data),(e=>(null==e?void 0:e.response.data)?Promise.reject(e.response.data):Promise.reject(e)));const S={getAll:()=>x.get("/bookmark"),remove:e=>x.delete(`/bookmark/${e}`),add:e=>x.post("/bookmark",e),update:e=>x.put("/bookmark",e)},M={getAll:()=>x.get("/tag"),add:e=>x.post("/tag",e),update:e=>x.put("/tag",e),remove:e=>x.delete(`/tag/${e}`)};function z(){return x.get("/serialize")}const B=c(!1);function V(e){B.value=e}const U=y();u("data-v-ea58cff8");const D={class:"container level"},C=f("div",null,[f("span",{class:"site-name"},"🎏 BMM")],-1),q={class:"level-right"},F={class:"container-wrapper"},J={class:"container"},N=f("footer",null,[f("span",null,"🎏 BMM · 书签管理")],-1),W={class:"loading"},G=f("div",null,[f("svg",{t:"1620615950650",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11296",width:"200",height:"200"},[f("path",{d:"M512 1024a512 512 0 0 1-512-512 512 512 0 0 1 512-512 512 512 0 0 1 512 512 512 512 0 0 1-512 512zM512 192c-33.088 0-65.408 8.448-96.96 25.408a9.6 9.6 0 0 0 6.528 17.856c10.048-2.176 20.224-3.2 30.464-3.2 143.552 0 259.968 125.312 259.968 279.936A59.968 59.968 0 1 0 832 512a320 320 0 0 0-320-320z m0 640c22.016 0 43.584-3.776 64.896-11.2a14.848 14.848 0 0 0-4.864-28.8c-143.616 0-260.032-125.376-260.032-280A60.032 60.032 0 0 0 192 512a320 320 0 0 0 320 320z",fill:"#9ED516","p-id":"11297"})]),f("span",null,"加载中")],-1);d();const H={expose:[],setup(e){const t=j(),a=p({adminPage:!1,bookmarksPage:!1,tagsPage:!1});function o(){if(localStorage.getItem("Authorization"))a.adminPage=!0,x.post("/login").then((()=>{t.push("/admin/bookmarks")})).catch((e=>{console.log(e);const t=prompt("身份校验失败，请重新输入密钥");t&&(localStorage.setItem("Authorization",t),o())})).finally((()=>{a.adminPage=!1}));else{const e=prompt("请输入密钥");if(!e)return;localStorage.setItem("Authorization",e),o()}}return(e,t)=>{var s;const n=w("router-link"),r=w("router-view");return m(),g(b,null,[f("nav",null,[f("div",D,[f(n,{to:"/index",class:"level-left"},{default:U((()=>[C])),_:1}),f("div",q,[(null==(s=e.$router.currentRoute.value.path)?void 0:s.includes("/admin/"))?(m(),g(b,{key:0},[f(n,{to:"/admin/tags"},{default:U((()=>[f("button",{class:["button mr-5  is-ghost",{"is-loading":h(a).tagsPage}],disabled:/admin\/tags/.test(e.$router.currentRoute.value.path)},"管理标签",10,["disabled"])])),_:1}),f(n,{to:"/admin/bookmarks"},{default:U((()=>[f("button",{class:["button is-ghost",{"is-loading":h(a).bookmarksPage}],disabled:/admin\/bookmarks/.test(e.$router.currentRoute.value.path)},"管理书签",10,["disabled"])])),_:1})],64)):(m(),g("button",{key:1,class:["button is-ghost",{"is-loading":h(a).adminPage}],onClick:t[1]||(t[1]=e=>o())},"登录",2))])])]),f("div",F,[f("main",J,[f(r)])]),N,f(_,{name:"fade"},{default:U((()=>[v(f("div",W,[G],512),[[k,h(B)]])])),_:1})],64)}},__scopeId:"data-v-ea58cff8"},K={props:{label:{type:String,default:""},modelValue:{require:!0},type:{type:String,default:"text"}},emits:["update:modelValue"]},Q={class:"field"},X={class:"label"};function Y(e){alert((null==e?void 0:e.message)||"发生未知错误")}K.render=function(e,t,a,o,s,n){return m(),g("section",Q,[f("label",X,O(a.label),1),P(e.$slots,"default",{},(()=>[f("input",{value:a.modelValue,type:"text",class:"input",onInput:t[1]||(t[1]=t=>e.$emit("update:modelValue",t.target.value))},null,40,["value"])]))])};var Z=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",setSiteTitle:function(e){document.querySelector("title").innerText=e},handleError:Y}),ee=E({state:()=>({tags:null,bookmarks:null}),getters:{getBookmarks:e=>e.bookmarks?Object.values(e.bookmarks):(j().push("/loading"),[]),getTags:e=>e.tags?Object.values(e.tags):(j().push("/loading"),[]),getBookmarksByTagId:e=>t=>Object.values(e.bookmarks).filter((e=>e.tagIdList.includes(t))),getTagsByIdList:e=>t=>t.map((t=>e.tags[t]))},mutations:{setTags(e,t){if(t instanceof Array){const a={};t.forEach((e=>{a[e.id]=e})),e.tags=a}else t instanceof Object?e.tags=t:alert("store setTags 出现错误")},setBookmarks(e,t){if(t instanceof Object)e.bookmarks=t;else if(t instanceof Array){const a={};t.forEach((e=>{a[e.id]=n(n({},e),{tagIdList:e.tagIdList||e.tagList.map((e=>e.id))})})),e.bookmarks=a}else alert("store setBookmarks 出现错误")}}});const te=L(H);te.use(A).use(ee),te.provide("axios",x),te.component("FormItem",K),te.config.globalProperties={$axios:x,$utils:Z,$store:ee,$router:A},te.mount("#app");export{K as _,z as a,S as b,T as g,Y as h,V as s,M as t};
